<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Publicar Post | Fotografía 16 20</title>
    <link rel="stylesheet" type="text/css" href="stylesheets/reset.css" />
    <link rel="stylesheet" type="text/css" href="stylesheets/main2.css" />

</head>

<body >

    <div id="header">

        <div class="container">

            <h1>Fotografía 16 20</h1>
            <div id="main_menu">

                <ul>
                    <li class="first_list"><a href="login.html" class="main_menu_first"
                        sessionStorage.clear()>Cerrar Sesión</a></li>
                </ul>

            </div> <!-- END #main_menu -->

        </div> <!-- END .container -->

    </div> <!-- END #header -->

    <div id="main_content">

        <div id="portfolio_area">

            <div class="container">

                <div id="portfolio_menu">

                    <ul>
                        <li><a href="posts-cliente.html">Todos los Posts</a></li>
                        <li><a href="publicarpost-cliente.html">Publicar Post</a></li>
                        <li><a href="misposts-cliente.html">Mis Posts</a></li>
                        <li><a href="perfil-cliente.html">Perfil</a></li>
                        
                    </ul>

                </div> <!-- END #portfolio_menu -->

            </div> <!-- END .container -->

        </div> <!-- END #portfolio_area -->

    </div> <!-- END #main_content -->

    
    <div id="main_content">

            <div class="container">

                <center>

                    <h3>Publicar Post</h3>

                </center>
               
            </br>
            </br>

                <div>
                    <div id="contact_info_left">

                        <form id="contact_form" role="form">
                            <fieldset>
                                <ol>
                                    <li>
                                        <label style= "font-size: large;" for="tipo">Tipo:</label>
                                        <select class="second_list second_list_border" id="tipo">
                                        <option value="Video">Video</option>
                                        <option value="Imagen">Imagen</option>
                                                        
                                        </select>
                                                        
                                    </li>
                                    <li>
                                        <label style= "font-size: large;" for="url">URL:</label><input type="text" size="100" maxlength=""
                                            id="url" />
                                    </li>
                                    <li>
                                        <label style= "font-size: large;" for="categoria">Escriba la Categoria:</label><input type="text" size="50" maxlength=""
                                            id="categoria" />
                                    </li>
                                   
                                
                                    <li>
                                        </br>
                                        </br>
                                        <button type="button" class="btn btn-primary" onclick="publicar()">Publicar</button>
            
                                    </li>
            
                                </ol>
            
                            </fieldset>
                        </form>

                 

                    </div> <!-- END #contact_info_left -->
                    
                   
                </div>

            


            </div> <!-- END .container -->

            


    </div> <!-- END #main_content -->

    <div id="footer">

        <div class="container">

            <div id="footer_about" class="footer_info">

                <img src="images/logo.jpeg" height="100" />

            </div> <!-- END #footer_about -->

            <div id="footer_explore" class="footer_info">


            </div> <!-- END #footer_about -->

            <div id="footer_browse" class="footer_info">


            </div> <!-- END #footer_about -->

            <div id="footer_contact" class="footer_info">



            </div> <!-- END #footer_about -->

            <div id="footer_connect" class="footer_info">

            </div class="container"> <!-- END #footer_about -->

            <p id="copyright">&copy; Copyright 2020
                <br />
            </p>


        </div> <!-- END .container -->

    </div> <!-- END #footer -->

    <script>

        var usuarioG = sessionStorage.getItem('usuario');
        var idG = sessionStorage.getItem('id');

    function publicar(){

        var url = document.getElementById("url").value
        var categoria = document.getElementById("categoria").value

        var seleccion_tipo = document.getElementById("tipo").options.selectedIndex
        var tipo = document.getElementById("tipo").options[seleccion_tipo].text

        fetch('https://backendproyecto2ipc1.herokuapp.com/crear_publicacion', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                    "type": tipo,
                    "url": url,
                    "date": "",
                    "category": categoria,
                    "idU": idG,
                    "usuario": usuarioG,
                    "estado": 1
            })
        })
        .then(res => res.json())
        .catch(err => {
            console.log(err)
            window.alert("Error")
        })
        .then(response => {
            console.log(response)
            window.alert("Tu publicación se realizó con Exito")
            window.location.href = "posts-cliente.html";
            
        })

    }


    </script>


</body>

</html>